{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GamersJam | Registrations for Tour</title>

    <!-- Fonts & icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link href="https://fonts.googleapis.com/css?family=Arvo|Bitter|Bree+Serif|Righteous|Special+Elite&display=swap" rel="stylesheet">

    <!-- Custom CSS files -->
    <link href="{% static 'users/css/all.min.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'users/css/sb-admin-2.min.css' %}" rel="stylesheet">
    <link href="{% static 'users/css/account.css' %}" rel="stylesheet">
</head>

<style>
    /* Loader initially hidden — can show when page is loading / submitting */
    .loader{ display: none; }
    .maincontent{ filter: blur(0px); }
</style>

<body>
    <!-- Side navigation drawer / mobile nav -->
    <div class="sidenav" id="sidenavs">
        <div class="navbody">
            <div class="closeicon">
                <button class="close-btn" id="closebtns">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>
            <div class="navlinks">
                <ul class="navsliks">
                    <li class="navlik">
                        <a href="{% url 'pasttournaments' %}">
                            <i class="fas fa-poll-h"></i>
                            <h5>Recent Matches</h5>
                        </a>
                    </li>
                    <div class="divide"></div>
                    <li class="navlik">
                        <a href="#">
                            <i class="fas fa-calendar"></i>
                            <h5>Upcoming Events</h5>
                        </a>
                    </li>
                    <div class="divide"></div>
                    <li class="navlik">
                        {% if user.is_authenticated %}
                        <a href="{% url 'Account' %}">
                            <i class="fas fa-user"></i>
                            <h5>Account</h5>
                        </a>
                        {% else %}
                        <a href="{% url 'Login' %}">
                            <i class="fas fa-user"></i>
                            <h5>Account</h5>
                        </a>
                        {% endif %}
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Header with logo, nav links, user icons -->
    <header>
        <div class="firstend">
            <div class="hamburgeri">
                <i class="fas fa-bars" id="hamburger"></i>
            </div>
            <div class="logoname">
                <img src="{% static 'tournaments/images/logo2.png' %}" alt="GamersJam Logo" class="mylogo">
            </div>
        </div>

        <nav class="links">
            <ul>
                <li>
                    <a href="{% url 'pasttournaments' %}" class="navlink">Match Results</a>
                </li>
            </ul>
        </nav>

        <div class="endnav">
            <ul class="navicons">
                {% if user.is_authenticated %}
                <li>
                    <a href="{% url 'mymatch' %}" class="navlink">
                        <i class="fas fa-calendar-alt"></i>
                    </a>
                </li>
                <li>
                    <a href="{% url 'home' %}" class="navlink">
                        <i class="fas fa-home"></i>
                    </a>
                </li>
                {% else %}
                <li>
                    <a href="{% url 'Signup' %}" class="navlink">
                        <h5 class="signup">Signup</h5>
                    </a>
                </li>
                <li>
                    <a href="{% url 'Login' %}" class="navlink">
                        <h5 class="signup">Login</h5>
                    </a>
                </li>
                {% endif %}
            </ul>
        </div>
    </header>

    {# Popup forms: used for inline editing user info (name, email, password, number) #}
    <div class="popupforms" id="nameform">
        <div class="close">
            <i class="fas fa-times" id="closenameform"></i>
        </div>
        <form method="POST" class="popupform">
            {% csrf_token %}
            <div class="form-field">
                <i class="fas fa-user"></i>
                <input type="text" id="fullname" class="input-field" value="{{ username }}" name="username" placeholder="Fullname">
            </div>
            <h4 id="fullnameinvalid" class="invalid"></h4>
            <button class="regesterme" id="submitname">Submit</button>
        </form>
    </div>

    <!-- Similar popup blocks for email, password and number edits -->
    <div class="popupforms" id="emailform">
        <!-- … -->
    </div>
    <div class="popupforms" id="passwordform">
        <!-- … -->
    </div>
    <div class="popupforms" id="numberform">
        <!-- … -->
    </div>

    <div class="loader" id="loaders"></div>

    <main id="maincontent">
        <div class="hero">
            {# Display Django messages (like success / error notifications) #}
            {% if messages %}
            <div class="alert alert-warning alert-dismissible fade show bg-white" role="alert"
                 style="position: absolute; text-align: center; z-index: 1;">
                {% for message in messages %}
                <span style="font-weight: bold; font-family: Special Elite, cursive;">
                    <i class="fas fa-check-circle"></i> {{ message }}
                </span>
                {% endfor %}
                <button type="button" class="close" data-dismiss="alert">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            {% endif %}

            <div class="message" id="messages">
                <i class="fas fa-times" onclick="document.getElementById('messages').style.width='0';document.getElementById('messages').style.visibility='hidden'"></i>
                <p id="actualmessage"></p>
            </div>

            <div class="regestration" id="userdetails">
                <div class="userinfo">
                    <div class="icons">
                        <div class="userimg">
                            <img src="{{ account.userimage.url }}" alt="" id="myimage">
                        </div>
                        <form method="POST" class="profile">
                            {% csrf_token %}
                            <input type="file" name="image" id="userimage" hidden>
                        </form>
                        <div class="camera">
                            <i class="fas fa-camera" id="camerafield"></i>
                        </div>
                        <div class="name">
                            <h4>{{ user.first_name }} {{ user.last_name }}</h4>
                        </div>
                    </div>

                    <div class="editzone">
                        {# Name section #}
                        <div class="editname">
                            <div class="currentname">
                                <h4><i class="fas fa-user"></i> Name</h4>
                                <h4 class="actualvalue">{{ user.first_name }} {{ user.last_name }}</h4>
                            </div>
                            <div class="editbutton">
                                <button type="button" id="editnamebutton">Edit</button>
                            </div>
                        </div>

                        {# Mobile number section #}
                        <div class="editname">
                            <div class="currentname">
                                <h4><i class="fas fa-mobile"></i> Mobile Number</h4>
                                <h4 class="actualvalue">{{ account.phnumber1 }}</h4>
                            </div>
                            <div class="editbutton">
                                <button type="button" id="editnumberdbutton">Edit</button>
                            </div>
                        </div>

                        {# Email section #}
                        <div class="editname">
                            <div class="currentname">
                                <h4><i class="fas fa-envelope"></i> E-mail</h4>
                                <h4 class="actualvalue">{{ user.email }}</h4>
                            </div>
                            <div class="editbutton">
                                <button type="button" id="editmailbutton">Edit</button>
                            </div>
                        </div>

                        {# Password section #}
                        <div class="editname">
                            <div class="currentname">
                                <h4><i class="fas fa-key"></i> Password</h4>
                                <h4 class="actualvalue">****</h4>
                            </div>
                            <div class="editbutton">
                                <button type="button" id="editpasswordbutton">Edit</button>
                            </div>
                        </div>

                    </div>  <!-- end editzone -->
                </div>  <!-- end userinfo -->
            </div>  <!-- end registration/userdetails -->
        </div>
    </main>

    <!-- JS libraries & custom scripts -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="{% static 'users/js/account.js' %}"></script>
</body>
</html>
